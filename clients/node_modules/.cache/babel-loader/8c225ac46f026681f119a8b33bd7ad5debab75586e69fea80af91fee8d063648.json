{"ast":null,"code":"import _defineProperty from\"C:/Users/user/Desktop/portfolio/sto-webs/clients/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/user/Desktop/portfolio/sto-webs/clients/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/user/Desktop/portfolio/sto-webs/clients/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState,useMemo}from\"react\";import ReplyForm from\"./ReplyForm\";import styles from\"../styles/Comment.module.css\";import Pagination from\"../Pagination/Pagination\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PageSize=6;var CommentsList=function CommentsList(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),comments=_useState2[0],setComments=_useState2[1];var _useState3=useState(1),_useState4=_slicedToArray(_useState3,2),currentPage=_useState4[0],setCurrentPage=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),openReplies=_useState6[0],setOpenReplies=_useState6[1];useEffect(function(){fetch(\"https://sto-web-pv.onrender.com/comments\").then(function(response){return response.json();}).then(function(data){setComments(data);console.log(data);}).catch(function(error){return console.error(error);});},[]);console.log(comments);var currentTableData=useMemo(function(){var firstPageIndex=(currentPage-1)*PageSize;var lastPageIndex=firstPageIndex+PageSize;return comments.slice(firstPageIndex,lastPageIndex);},[currentPage,comments]);var toggleReply=function toggleReply(commentId){setOpenReplies(function(prevState){return _objectSpread(_objectSpread({},prevState),{},_defineProperty({},commentId,!prevState[commentId]));});};return/*#__PURE__*/_jsx(\"section\",{className:styles.feedback,children:/*#__PURE__*/_jsxs(\"div\",{className:styles.feedback__container,children:[/*#__PURE__*/_jsx(Pagination,{className:styles.pagination_bar,currentPage:currentPage,totalCount:comments.length,pageSize:PageSize,onPageChange:function onPageChange(page){return setCurrentPage(page);}}),/*#__PURE__*/_jsx(\"h2\",{className:styles.feedback__title,children:\"\\u0412\\u0456\\u0434\\u0433\\u0443\\u043A\\u0438\"}),currentTableData.map(function(comment){var _comment$replies;return/*#__PURE__*/_jsxs(\"div\",{className:styles.comment__block,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.feedback__name_rate_date,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.feedback__name_rate,children:[/*#__PURE__*/_jsx(\"p\",{children:comment.author}),/*#__PURE__*/_jsxs(\"div\",{className:comment.starRate===\"1\"?styles.rating_stars_first:comment.starRate===\"2\"?styles.rating_stars_second:comment.starRate===\"3\"?styles.rating_stars_third:comment.starRate===\"4\"?styles.rating_stars_fourth:comment.starRate===\"5\"?styles.rating_stars_fifth:styles.rating_stars,children:[/*#__PURE__*/_jsx(\"span\",{}),/*#__PURE__*/_jsx(\"span\",{}),/*#__PURE__*/_jsx(\"span\",{}),/*#__PURE__*/_jsx(\"span\",{}),/*#__PURE__*/_jsx(\"span\",{})]})]}),/*#__PURE__*/_jsx(\"span\",{className:styles.feedback__date,children:comment.day})]}),/*#__PURE__*/_jsx(\"p\",{children:comment.content}),/*#__PURE__*/_jsxs(\"div\",{className:(comment===null||comment===void 0?void 0:comment.replies.length)===0?styles.unActive:styles.reply__answers,children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u0412\\u0456\\u0434\\u043F\\u043E\\u0432\\u0456\\u0434\\u0456:\"}),(_comment$replies=comment.replies)===null||_comment$replies===void 0?void 0:_comment$replies.map(function(message){return/*#__PURE__*/_jsxs(\"div\",{className:styles.answer,children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0406\\u043C'\\u044F:\"}),\" \",message.author]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0412\\u0456\\u0434\\u043F\\u043E\\u0432\\u0456\\u0434\\u044C \\u043D\\u0430 \\u043A\\u043E\\u043C\\u0435\\u043D\\u0442\\u0430\\u0440:\"}),\" \",message.content]})]});})]}),/*#__PURE__*/_jsx(\"div\",{className:styles.reply,onClick:function onClick(){toggleReply(comment._id);},children:/*#__PURE__*/_jsxs(\"span\",{className:styles.reply_button,children:[/*#__PURE__*/_jsx(\"span\",{className:styles.arrow__icon,children:/*#__PURE__*/_jsx(\"i\",{class:\"fa-solid fa-reply fa-rotate-180\"})}),\"\\u0412\\u0456\\u0434\\u043F\\u043E\\u0432\\u0456\\u0441\\u0442\\u0438\"]})}),openReplies[comment._id]&&/*#__PURE__*/_jsx(\"div\",{className:styles.reply__content,children:/*#__PURE__*/_jsx(ReplyForm,{commentId:comment._id,setComments:setComments})})]},comment._id);}),/*#__PURE__*/_jsx(Pagination,{className:styles.pagination_bar,currentPage:currentPage,totalCount:comments.length,pageSize:PageSize,onPageChange:function onPageChange(page){return setCurrentPage(page);}})]})});};export default CommentsList;","map":{"version":3,"names":["React","useEffect","useState","useMemo","ReplyForm","styles","Pagination","jsx","_jsx","jsxs","_jsxs","PageSize","CommentsList","_useState","_useState2","_slicedToArray","comments","setComments","_useState3","_useState4","currentPage","setCurrentPage","_useState5","_useState6","openReplies","setOpenReplies","fetch","then","response","json","data","console","log","catch","error","currentTableData","firstPageIndex","lastPageIndex","slice","toggleReply","commentId","prevState","_objectSpread","_defineProperty","className","feedback","children","feedback__container","pagination_bar","totalCount","length","pageSize","onPageChange","page","feedback__title","map","comment","_comment$replies","comment__block","feedback__name_rate_date","feedback__name_rate","author","starRate","rating_stars_first","rating_stars_second","rating_stars_third","rating_stars_fourth","rating_stars_fifth","rating_stars","feedback__date","day","content","replies","unActive","reply__answers","message","answer","reply","onClick","_id","reply_button","arrow__icon","class","reply__content"],"sources":["C:/Users/user/Desktop/portfolio/sto-webs/clients/src/components/Comments/CommentsList.jsx"],"sourcesContent":["import React, { useEffect, useState, useMemo } from \"react\";\nimport ReplyForm from \"./ReplyForm\";\nimport styles from \"../styles/Comment.module.css\";\nimport Pagination from \"../Pagination/Pagination\";\n\nlet PageSize = 6;\n\nconst CommentsList = () => {\n  const [comments, setComments] = useState([]);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [openReplies, setOpenReplies] = useState({});\n\n  useEffect(() => {\n    fetch(\"https://sto-web-pv.onrender.com/comments\")\n      .then((response) => response.json())\n      .then((data) => {setComments(data) ; console.log(data)})\n      .catch((error) => console.error(error));\n  }, []);\n\n  console.log(comments)\n\n  const currentTableData = useMemo(() => {\n    const firstPageIndex = (currentPage - 1) * PageSize;\n    const lastPageIndex = firstPageIndex + PageSize;\n    return comments.slice(firstPageIndex, lastPageIndex);\n  }, [currentPage, comments]);\n\n  const toggleReply = (commentId) => {\n    setOpenReplies((prevState) => ({\n      ...prevState,\n      [commentId]: !prevState[commentId],\n    }));\n  };\n\n  return (\n    <section className={styles.feedback}>\n      <div className={styles.feedback__container}>\n        <Pagination\n          className={styles.pagination_bar}\n          currentPage={currentPage}\n          totalCount={comments.length}\n          pageSize={PageSize}\n          onPageChange={(page) => setCurrentPage(page)}\n        />\n        <h2 className={styles.feedback__title}>Відгуки</h2>\n        {currentTableData.map((comment) => (\n          <div key={comment._id} className={styles.comment__block}>\n            <div className={styles.feedback__name_rate_date}>\n              <div className={styles.feedback__name_rate}>\n                <p>{comment.author}</p>\n                <div\n                  className={\n                    comment.starRate === \"1\"\n                      ? styles.rating_stars_first\n                      : comment.starRate === \"2\"\n                      ? styles.rating_stars_second\n                      : comment.starRate === \"3\"\n                      ? styles.rating_stars_third\n                      : comment.starRate === \"4\"\n                      ? styles.rating_stars_fourth\n                      : comment.starRate === \"5\"\n                      ? styles.rating_stars_fifth\n                      : styles.rating_stars\n                  }\n                >\n                  <span></span>\n                  <span></span>\n                  <span></span>\n                  <span></span>\n                  <span></span>\n                </div>\n              </div>\n              <span className={styles.feedback__date}>{comment.day}</span>\n            </div>\n            <p>{comment.content}</p>\n            <div className={comment?.replies.length === 0 ? styles.unActive : styles.reply__answers}>\n           <h3>Відповіді:</h3>\n\n            {comment.replies?.map((message) => (\n              <div className={styles.answer}>\n                <p><strong>Ім'я:</strong> {message.author}</p>\n                <p><strong>Відповідь на коментар:</strong> {message.content}</p>\n              </div>\n            ))}\n            </div>\n             <div\n              className={styles.reply}\n              onClick={() => {\n                toggleReply(comment._id);\n              }}\n            >\n              <span className={styles.reply_button}>\n                <span className={styles.arrow__icon}>\n                  <i class=\"fa-solid fa-reply fa-rotate-180\"></i>\n                </span>\n                Відповісти\n              </span>\n            </div>\n            {openReplies[comment._id] && (\n              <div className={styles.reply__content}>\n                <ReplyForm commentId={comment._id} setComments={setComments} />\n              </div>\n            )}\n          </div>\n        ))}\n         <Pagination\n          className={styles.pagination_bar}\n          currentPage={currentPage}\n          totalCount={comments.length}\n          pageSize={PageSize}\n          onPageChange={(page) => setCurrentPage(page)}\n        />\n      </div>\n    </section>\n  );\n};\n\nexport default CommentsList;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}