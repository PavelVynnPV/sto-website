{"ast":null,"code":"import _defineProperty from\"C:/Users/Pavel/Desktop/portfolio/sto-webs/clients/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/Pavel/Desktop/portfolio/sto-webs/clients/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/Pavel/Desktop/portfolio/sto-webs/clients/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState,useMemo}from\"react\";import ReplyForm from\"./ReplyForm\";import styles from\"../styles/Comment.module.css\";import Pagination from\"../Pagination/Pagination\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PageSize=6;var CommentsList=function CommentsList(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),comments=_useState2[0],setComments=_useState2[1];var _useState3=useState(1),_useState4=_slicedToArray(_useState3,2),currentPage=_useState4[0],setCurrentPage=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),openReplies=_useState6[0],setOpenReplies=_useState6[1];useEffect(function(){fetch(\"http://localhost:5000/comments\").then(function(response){return response.json();}).then(function(data){return setComments(data);}).catch(function(error){return console.error(error);});},[]);var currentTableData=useMemo(function(){var firstPageIndex=(currentPage-1)*PageSize;var lastPageIndex=firstPageIndex+PageSize;return comments.slice(firstPageIndex,lastPageIndex);},[currentPage,comments]);var toggleReply=function toggleReply(commentId){setOpenReplies(function(prevState){return _objectSpread(_objectSpread({},prevState),{},_defineProperty({},commentId,!prevState[commentId]));});};return/*#__PURE__*/_jsx(\"section\",{className:styles.feedback,children:/*#__PURE__*/_jsxs(\"div\",{className:styles.feedback__container,children:[/*#__PURE__*/_jsx(Pagination,{className:styles.pagination_bar,currentPage:currentPage,totalCount:comments.length,pageSize:PageSize,onPageChange:function onPageChange(page){return setCurrentPage(page);}}),/*#__PURE__*/_jsx(\"h2\",{className:styles.feedback__title,children:\"\\u0412\\u0456\\u0434\\u0433\\u0443\\u043A\\u0438\"}),currentTableData.map(function(comment){var _comment$replies;return/*#__PURE__*/_jsxs(\"div\",{className:styles.comment__block,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.feedback__name_rate_date,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.feedback__name_rate,children:[/*#__PURE__*/_jsx(\"p\",{children:comment.author}),/*#__PURE__*/_jsxs(\"div\",{className:comment.starRate===\"1\"?styles.rating_stars_first:comment.starRate===\"2\"?styles.rating_stars_second:comment.starRate===\"3\"?styles.rating_stars_third:comment.starRate===\"4\"?styles.rating_stars_fourth:comment.starRate===\"5\"?styles.rating_stars_fifth:styles.rating_stars,children:[/*#__PURE__*/_jsx(\"span\",{}),/*#__PURE__*/_jsx(\"span\",{}),/*#__PURE__*/_jsx(\"span\",{}),/*#__PURE__*/_jsx(\"span\",{}),/*#__PURE__*/_jsx(\"span\",{})]})]}),/*#__PURE__*/_jsx(\"span\",{className:styles.feedback__date,children:comment.day})]}),/*#__PURE__*/_jsx(\"p\",{children:comment.content}),/*#__PURE__*/_jsxs(\"div\",{className:(comment===null||comment===void 0?void 0:comment.replies.length)===0?styles.unActive:styles.reply__answers,children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u0412\\u0456\\u0434\\u043F\\u043E\\u0432\\u0456\\u0434\\u0456:\"}),(_comment$replies=comment.replies)===null||_comment$replies===void 0?void 0:_comment$replies.map(function(message){return/*#__PURE__*/_jsxs(\"div\",{className:styles.answer,children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0406\\u043C'\\u044F:\"}),\" \",message.author]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0412\\u0456\\u0434\\u043F\\u043E\\u0432\\u0456\\u0434\\u044C \\u043D\\u0430 \\u043A\\u043E\\u043C\\u0435\\u043D\\u0442\\u0430\\u0440:\"}),\" \",message.content]})]});})]}),/*#__PURE__*/_jsx(\"div\",{className:styles.reply,onClick:function onClick(){toggleReply(comment._id);},children:/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"span\",{className:styles.arrow__icon,children:/*#__PURE__*/_jsx(\"i\",{class:\"fa-solid fa-reply fa-rotate-180\"})}),\"\\u0412\\u0456\\u0434\\u043F\\u043E\\u0432\\u0456\\u0441\\u0442\\u0438\"]})}),openReplies[comment._id]&&/*#__PURE__*/_jsx(\"div\",{className:styles.reply__content,children:/*#__PURE__*/_jsx(ReplyForm,{commentId:comment._id,setComments:setComments})})]},comment._id);})]})});};export default CommentsList;","map":{"version":3,"names":["React","useEffect","useState","useMemo","ReplyForm","styles","Pagination","jsx","_jsx","jsxs","_jsxs","PageSize","CommentsList","_useState","_useState2","_slicedToArray","comments","setComments","_useState3","_useState4","currentPage","setCurrentPage","_useState5","_useState6","openReplies","setOpenReplies","fetch","then","response","json","data","catch","error","console","currentTableData","firstPageIndex","lastPageIndex","slice","toggleReply","commentId","prevState","_objectSpread","_defineProperty","className","feedback","children","feedback__container","pagination_bar","totalCount","length","pageSize","onPageChange","page","feedback__title","map","comment","_comment$replies","comment__block","feedback__name_rate_date","feedback__name_rate","author","starRate","rating_stars_first","rating_stars_second","rating_stars_third","rating_stars_fourth","rating_stars_fifth","rating_stars","feedback__date","day","content","replies","unActive","reply__answers","message","answer","reply","onClick","_id","arrow__icon","class","reply__content"],"sources":["C:/Users/Pavel/Desktop/portfolio/sto-webs/clients/src/components/Comments/CommentsList.jsx"],"sourcesContent":["import React, { useEffect, useState, useMemo } from \"react\";\r\nimport ReplyForm from \"./ReplyForm\";\r\nimport styles from \"../styles/Comment.module.css\";\r\nimport Pagination from \"../Pagination/Pagination\";\r\n\r\nlet PageSize = 6;\r\n\r\nconst CommentsList = () => {\r\n  const [comments, setComments] = useState([]);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [openReplies, setOpenReplies] = useState({});\r\n\r\n  useEffect(() => {\r\n    fetch(\"http://localhost:5000/comments\")\r\n      .then((response) => response.json())\r\n      .then((data) => setComments(data))\r\n      .catch((error) => console.error(error));\r\n  }, []);\r\n\r\n  const currentTableData = useMemo(() => {\r\n    const firstPageIndex = (currentPage - 1) * PageSize;\r\n    const lastPageIndex = firstPageIndex + PageSize;\r\n    return comments.slice(firstPageIndex, lastPageIndex);\r\n  }, [currentPage, comments]);\r\n\r\n  const toggleReply = (commentId) => {\r\n    setOpenReplies((prevState) => ({\r\n      ...prevState,\r\n      [commentId]: !prevState[commentId],\r\n    }));\r\n  };\r\n\r\n  return (\r\n    <section className={styles.feedback}>\r\n      <div className={styles.feedback__container}>\r\n        <Pagination\r\n          className={styles.pagination_bar}\r\n          currentPage={currentPage}\r\n          totalCount={comments.length}\r\n          pageSize={PageSize}\r\n          onPageChange={(page) => setCurrentPage(page)}\r\n        />\r\n        <h2 className={styles.feedback__title}>Відгуки</h2>\r\n        {currentTableData.map((comment) => (\r\n          <div key={comment._id} className={styles.comment__block}>\r\n            <div className={styles.feedback__name_rate_date}>\r\n              <div className={styles.feedback__name_rate}>\r\n                <p>{comment.author}</p>\r\n                <div\r\n                  className={\r\n                    comment.starRate === \"1\"\r\n                      ? styles.rating_stars_first\r\n                      : comment.starRate === \"2\"\r\n                      ? styles.rating_stars_second\r\n                      : comment.starRate === \"3\"\r\n                      ? styles.rating_stars_third\r\n                      : comment.starRate === \"4\"\r\n                      ? styles.rating_stars_fourth\r\n                      : comment.starRate === \"5\"\r\n                      ? styles.rating_stars_fifth\r\n                      : styles.rating_stars\r\n                  }\r\n                >\r\n                  <span></span>\r\n                  <span></span>\r\n                  <span></span>\r\n                  <span></span>\r\n                  <span></span>\r\n                </div>\r\n              </div>\r\n              <span className={styles.feedback__date}>{comment.day}</span>\r\n            </div>\r\n            <p>{comment.content}</p>\r\n            <div className={comment?.replies.length === 0 ? styles.unActive : styles.reply__answers}>\r\n           <h3>Відповіді:</h3>\r\n\r\n            {comment.replies?.map((message) => (\r\n              <div className={styles.answer}>\r\n                <p><strong>Ім'я:</strong> {message.author}</p>\r\n                <p><strong>Відповідь на коментар:</strong> {message.content}</p>\r\n              </div>\r\n            ))}\r\n            </div>\r\n             <div\r\n              className={styles.reply}\r\n              onClick={() => {\r\n                toggleReply(comment._id);\r\n              }}\r\n            >\r\n              <span>\r\n                <span className={styles.arrow__icon}>\r\n                  <i class=\"fa-solid fa-reply fa-rotate-180\"></i>\r\n                </span>\r\n                Відповісти\r\n              </span>\r\n            </div>\r\n            {openReplies[comment._id] && (\r\n              <div className={styles.reply__content}>\r\n                <ReplyForm commentId={comment._id} setComments={setComments} />\r\n              </div>\r\n            )}\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default CommentsList;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}